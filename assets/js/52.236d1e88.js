(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{593:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("Boxx",{attrs:{changeTime:"30000"}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[t._v("前言")]),a("p",[a("code",[t._v("Vue")]),t._v(" 除了 "),a("code",[t._v("JS")]),t._v(" 已有的功能外，还具有自己独特的作用域。作用域控制可以使用那些变量以及在何处使用。它控制它们对应程序不同部分的“可见性”。")])]),a("p",[a("strong",[a("code",[t._v("Vue")]),t._v(" 中4个级别的作用域：")])]),t._v(" "),a("ul",[a("li",[t._v("全局作用域")]),t._v(" "),a("li",[t._v("子树作用域")]),t._v(" "),a("li",[t._v("组件作用域")]),t._v(" "),a("li",[t._v("实例作用域")])]),t._v(" "),a("h2",{attrs:{id:"全局作用域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局作用域"}},[t._v("#")]),t._v(" 全局作用域")]),t._v(" "),a("p",[a("code",[t._v("Vue")]),t._v(" 应用程序中的全局作用域与任何编程语言中的全局作用域类似，这些变量在应用程序中的任何地方都是可用的。")]),t._v(" "),a("p",[t._v("可以把全局作用域看作应用程序作用域，因为它将作用域限制为整个应用程序。")]),t._v(" "),a("p",[a("strong",[t._v("使用全局作用域")]),t._v("\n使用全局作用域的主要方式是向"),a("code",[t._v("Vue")]),t._v("原型添加一个值：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$globalValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Global Scope!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("通过将其添加到 "),a("code",[t._v("Vue")]),t._v(" 对象的原型中，可以在应用程序的每个组件上自动使用它。可以像这样直接从组件访问它：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$globalValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'Global Scope!'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("使用"),a("code",[t._v("$")]),t._v("作为这些变量的前缀是一种标准做法，因此我们知道它们是全局值，而不是每个组件唯一的。")]),t._v(" "),a("p",[a("code",[t._v("Vue")]),t._v("、"),a("code",[t._v("vue-router")]),t._v("和"),a("code",[t._v("vuex")]),t._v("(以及许多其他库)都使用这种技术来定义全局值。例如，来自"),a("code",[t._v("vue-router")]),t._v("的"),a("code",[t._v("$route")]),t._v("对象是这样一个全局作用域的变量。")]),t._v(" "),a("h2",{attrs:{id:"子树作用域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#子树作用域"}},[t._v("#")]),t._v(" 子树作用域")]),t._v(" "),a("p",[t._v("大多数时候，全局范围有点像大锤，我们需要一些更精确的东西。子树作用域中的变量作用域是应用程序的特定部分，而不是整个应用程序。")]),t._v(" "),a("p",[t._v("此级别的作用域可能是最少使用的，但是在确实需要使用时非常方便。通常，一组组件需要共享很多相同的数据，并且通过"),a("code",[t._v("props")]),t._v("传递数据非常繁琐。")]),t._v(" "),a("p",[t._v("此作用域最适合用于共享上下文信息，这些上下文信息可以根据组件在应用程序中的位置进行更改，可以是这样的：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("本地状态和数据")]),t._v(" 如果只有一小部分应用程序需要使用 "),a("code",[t._v("Vuex")]),t._v("，则无需使用 "),a("code",[t._v("Vuex")]),t._v("。如果使用"),a("code",[t._v("props")]),t._v("传递会变得繁琐且麻烦，此时，子树作用域可能是我们最好的选择。")]),t._v(" "),a("li",[a("strong",[t._v("配置")]),t._v(" 有时我们需要组件以某种特定方式运行，但仅在应用程序的一部分中运行。例如，注册表单中的所有"),a("code",[t._v("Input组件")]),t._v("都需要验证，但是我们不想在整个应用程序中都要求验证。")])]),t._v(" "),a("p",[a("strong",[t._v("使用子树作用域")]),t._v("\n子树作用域是通过使用"),a("code",[t._v("provide")]),t._v("和"),a("code",[t._v("inject")]),t._v("创建的。我们提供希望可用于整个子树的值，然后将它们注入需要它们的组件中。")]),t._v(" "),a("h2",{attrs:{id:"组件作用域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件作用域"}},[t._v("#")]),t._v(" 组件作用域")]),t._v(" "),a("p",[t._v("更具体一点，组件作用域使变量可用于单个组件。但是这不应该与更具体的实例作用域相混淆。")]),t._v(" "),a("p",[t._v("如果一个变量具有组件作用域，那么它就是一个组件的所有实例都可以使用的单个变量。我们可以拥有几个相同的组件，并且它们都能够访问相同的变量。")]),t._v(" "),a("p",[t._v("你可能熟悉 "),a("code",[t._v("JS")]),t._v(" 中的模块作用域。在单个模块或文件中定义的任何内容都属于相同的模块作用域。由于组件是在单个文件中定义的，所以组件中的所有内容都在相同的模块作用域内。")]),t._v(" "),a("p",[a("strong",[t._v("使用组件作用域")]),t._v("\n要使用组件作用域，我们需要在与组件相同的文件中定义一个变量：")]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("new-component"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    {{ componentScope }}\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" componentScope "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'This is in the component scope'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      componentScope"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" componentScope"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("p",[t._v("在此组件中渲染的变量"),a("code",[t._v("componentScope")]),t._v("是相同的变量，不管使用此组件多少次，"),a("code",[t._v("componentScope")]),t._v(" 始终只有一个，没有多个副本。")]),t._v(" "),a("p",[t._v("如果此组件的一个实例修改了"),a("code",[t._v("componentScope")]),t._v("的值，则该组件的每个其他实例都会更改。不应使用这种方式在组件之间进行通信，但这是共享数据的一种好方法。")]),t._v(" "),a("h2",{attrs:{id:"实例作用域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实例作用域"}},[t._v("#")]),t._v(" 实例作用域")]),t._v(" "),a("p",[t._v("实例作用域是我们可以获得的"),a("code",[t._v("Vue")]),t._v("作用域变量最常见形式，具有实例作用域的任何变量仅可用于组件的特定用法。我们通常将其称为内部状态，有时也称为局部状态。")]),t._v(" "),a("p",[a("strong",[t._v("使用实例作用域")]),t._v("\n无论何时使用"),a("code",[t._v("data()")]),t._v("函数或使用"),a("code",[t._v("computed props")]),t._v("，都是在使用实例作用域。")]),t._v(" "),a("p",[t._v("甚至直接向组件实例添加属性也可以达到以下效果：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newProperty "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Instance scope'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h2",{attrs:{id:"但是-如果以这种方式添加属性-则必须记住-它们不是响应式的。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#但是-如果以这种方式添加属性-则必须记住-它们不是响应式的。"}},[t._v("#")]),t._v(" 但是，如果以这种方式添加属性，则"),a("strong",[t._v("必须记住")]),t._v("，它们"),a("strong",[t._v("不是响应式的")]),t._v("。")]),t._v(" "),a("p",[t._v("作者："),a("strong",[t._v("Michael Thiessen")]),t._v(" 来源："),a("strong",[t._v("Michael")]),t._v(" "),a("br"),t._v("\n原文："),a("a",{attrs:{href:"https://frontendsociety.com/why-you-shouldnt-use-vue-component-ff019fbcac2e?gi=ce7b162d53d4",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://frontendsociety.com/why-you-shouldnt-use-vue-component-ff019fbcac2e?gi=ce7b162d53d4"),a("OutboundLink")],1)])],1)}),[],!1,null,null,null);s.default=e.exports}}]);